import "primitives/core.fil";

comp main<G: 1>(
  @interface[G] go: 1,
  @[G, G+1] left: 32,
  @[G, G+1] right: 32,
) -> (
  @[G, G+1] out: 32,
) {

  // If the register does not contain a valid value, produce 0
  c := new Prev[1, 1]<G>(go);
  r := new Prev[32, 0]<G>(add.out);
  mux := new Mux[32]<G>(c.prev, r.prev, 0);

  mul := new MultComb[32]<G>(left, right);
  add := new Add[32]<G>(mul.out, mux.out);

  out = add.out;
}